# BuilderGenerator

Public version of CodeAPI BuilderGen.

BuilderGenerator generates the builder based on the source-code (CodeAPI BuilderGen generates builder based on class-file).

BuilderGenerator can only generate Java builders but supports all languages that generate Java Annotation Processing stubs.

**Classes generated by BuilderGenerator does not requires runtime-dependency**



# How to use

## Setup annotation processing

**TODO**

## API

**TODO**

# Builder Style

The BuilderGenerator uses a special template of builders, the BuilderGenerator is designed to use Builders as object mutator for Immutable Objects.

To generate builder classes first you need to have an base interface for the implementation and this base interface MUST have an `Builder` inner class, example:

```java
class PersonImpl implements Person {
    private final String name;
    private final int age;

    @GenBuilder(base = Person.class)
    public PersonImp(String name, int age) {
        this.name = name;
        this.age = age;
    }

    @Override
    public String getName() {
        return this.name;
    }

    @Override
    public int getAge() {
        return this.age;
    }

    // Implementation of builder method.
    @Override
    public Builder<T, ?> builder() {
        return PersonBuilder.builder();
    }
}

interface Person {
    
    String getName();
    int getAge();
    
    // You can provide and implement the builder method
    Builder<T, ?> builder();
    
    interface Builder<T extends Person, B extends Builder<T, S>> extends com.github.jonathanxd.buildergenerator.Builder<T, B> {
        
        Builder<T, B> withName(String name);
        
        @PropertyInfo(validator = @Validator(value = @MethodRef(value = Validators.class, name = "positiveInt")))
        Builder<T, B> withAge(int age);
        
        // You could also provide getter methods
        // BuilderGenerator will generates these method regardless you provide or not.
        String getName();
        int getAge();
        
    }
}
```

BuilderGenerator will generate a builder like this (attention: Builder generator generates class files and not java files):
```java
public final class PersonBuilder implements Person.Builder<Person, PersonBuilder> {
    
    private String name;
    private int age = -1;
    
    public PersonBuilder() {        
    }
    
    public PersonBuilder(Person defaults) {
        this.name = defaults.getName();
        this.age = defaults.getAge();
    }
    
    public static PersonBuilder builder() {
        return new PersonBuilder();
    }
    
    public static PersonBuilder builder(Person defaults) {
        return new PersonBuilder(defaults);
    }
    
    public Person.Builder<Person, PersonBuilder> withName(String name) {
        Objects.requireNonNull(name, "Property 'name' cannot be null");
        this.name = name;
        return this;
    }
    
    public Person.Builder<Person, PersonBuilder> withAge(int age) {
        if(age < 0)
            throw new IllegalArgumentException("The input integer '"+i+"' for property 'age' must be positive.");
        this.age = age;
        return this;
    }
    
    public String getName() {
        return this.name;
    }
    
    public int getAge() {
        return this.age;
    }
    
    public /*bridge*/ Object build() {
        return (Person) build();
    }
        

    public Person build() {
        Objects.requireNonNull(name, "Property 'name' cannot be null");
        
        if(age < 0)
            throw new IllegalArgumentException("The input integer '"+i+"' for property 'age' must be positive.");
        
        return new PersonImpl(name, age);
    }
    
}
```

**BuilderGenerator automatically generate null checks for non-null `Object` properties**

**Extending `com.github.jonathanxd.buildergenerator.Builder` class is not enforced, you are free to use other class as base interface (The class need at least provide a `build()` method, but it is not enforced) of our builders, in this example we use the `Builder Generator Builder` class, but codes generated by BuilderGenerator doest not depends on any class of the project** 